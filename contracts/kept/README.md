# æ™ºèƒ½åˆçº¦å¼€å‘æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

è¿™ä¸ªç›®å½•åŒ…å«äº†åŸºäºDIDçš„å¤–éƒ¨ç­¾åæœåŠ¡çš„æ™ºèƒ½åˆçº¦å¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬ï¼š

- **DIDVerifier.sol** - DIDèº«ä»½éªŒè¯åˆçº¦
- **AssetManager.sol** - èµ„äº§ç®¡ç†åˆçº¦
- å®Œæ•´çš„ç¼–è¯‘ã€éƒ¨ç½²å’Œæµ‹è¯•å·¥å…·

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è®¾ç½®ç¯å¢ƒå˜é‡
python setup_environment.py
```

### 2. ç¼–è¯‘åˆçº¦

```bash
python compile_contracts.py
```

### 3. éƒ¨ç½²åˆçº¦

```bash
python deploy_contracts.py
```

### 4. æµ‹è¯•åˆçº¦

```bash
python test_contracts.py
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
contracts/
â”œâ”€â”€ DIDVerifier.sol          # DIDéªŒè¯åˆçº¦
â”œâ”€â”€ AssetManager.sol         # èµ„äº§ç®¡ç†åˆçº¦
â”œâ”€â”€ config.py               # é…ç½®æ–‡ä»¶
â”œâ”€â”€ compile_contracts.py    # ç¼–è¯‘è„šæœ¬
â”œâ”€â”€ deploy_contracts.py     # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ test_contracts.py       # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ setup_environment.py    # ç¯å¢ƒè®¾ç½®å·¥å…·
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–
â”œâ”€â”€ env_example.txt         # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ build/                  # ç¼–è¯‘è¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ *.json             # ç¼–è¯‘ç»“æœ
â”‚   â””â”€â”€ deployment.json    # éƒ¨ç½²ç»“æœ
â””â”€â”€ abi/                   # ABIæ–‡ä»¶ç›®å½•
    â”œâ”€â”€ DIDVerifier.abi    # DIDéªŒè¯åˆçº¦ABI
    â””â”€â”€ AssetManager.abi   # èµ„äº§ç®¡ç†åˆçº¦ABI
```

## âš™ï¸ é…ç½®è¯´æ˜

### å¿…éœ€çš„ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `BESU_RPC_URL` | BesuèŠ‚ç‚¹RPCåœ°å€ | `http://192.168.1.224:8545` |
| `CHAIN_ID` | ç½‘ç»œé“¾ID | `2023` |
| `DEPLOYER_PRIVATE_KEY` | éƒ¨ç½²è´¦æˆ·ç§é’¥ | `0x...` |

### å¯é€‰çš„ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `GAS_LIMIT` | Gasé™åˆ¶ | `2000000` |
| `GAS_PRICE` | Gasä»·æ ¼ | `0` (å…è´¹) |
| `DEBUG` | è°ƒè¯•æ¨¡å¼ | `False` |

## ğŸ”§ åˆçº¦åŠŸèƒ½

### DIDVerifieråˆçº¦

- **åŠŸèƒ½**: ç®¡ç†ç”¨æˆ·èº«ä»½éªŒè¯çŠ¶æ€
- **ä¸»è¦æ–¹æ³•**:
  - `verifyIdentity(address, did)` - éªŒè¯ç”¨æˆ·èº«ä»½
  - `revokeVerification(address)` - æ’¤é”€èº«ä»½éªŒè¯
  - `isVerified(address)` - æŸ¥è¯¢éªŒè¯çŠ¶æ€
  - `setOracle(address)` - è®¾ç½®Oracleåœ°å€

### AssetManageråˆçº¦

- **åŠŸèƒ½**: ç®¡ç†ç”¨æˆ·èµ„äº§ï¼Œéœ€è¦èº«ä»½éªŒè¯
- **ä¸»è¦æ–¹æ³•**:
  - `deposit()` - å­˜æ¬¾ï¼ˆéœ€è¦èº«ä»½éªŒè¯ï¼‰
  - `withdraw(amount)` - æå–ï¼ˆéœ€è¦èº«ä»½éªŒè¯ï¼‰
  - `transfer(to, amount)` - è½¬è´¦ï¼ˆåŒæ–¹éƒ½éœ€è¦èº«ä»½éªŒè¯ï¼‰
  - `balances(address)` - æŸ¥è¯¢ä½™é¢

## ğŸ§ª æµ‹è¯•è¯´æ˜

æµ‹è¯•è„šæœ¬ä¼šæ‰§è¡Œä»¥ä¸‹æµ‹è¯•ï¼š

1. **DIDVerifieræµ‹è¯•**:
   - è®¾ç½®Oracle
   - éªŒè¯ç”¨æˆ·èº«ä»½
   - æ£€æŸ¥éªŒè¯çŠ¶æ€

2. **AssetManageræµ‹è¯•**:
   - å­˜æ¬¾æ“ä½œ
   - æå–æ“ä½œ
   - ä½™é¢æŸ¥è¯¢

## ğŸ“ éƒ¨ç½²æµç¨‹

1. **ç¼–è¯‘åˆçº¦** - ç”Ÿæˆå­—èŠ‚ç å’ŒABI
2. **éƒ¨ç½²DIDVerifier** - å…ˆéƒ¨ç½²éªŒè¯åˆçº¦
3. **éƒ¨ç½²AssetManager** - ä½¿ç”¨DIDVerifieråœ°å€ä½œä¸ºæ„é€ å‡½æ•°å‚æ•°
4. **éªŒè¯éƒ¨ç½²** - æ£€æŸ¥åˆçº¦ä»£ç æ˜¯å¦æ­£ç¡®éƒ¨ç½²

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç½‘ç»œè¿æ¥å¤±è´¥**
   - æ£€æŸ¥BesuèŠ‚ç‚¹æ˜¯å¦è¿è¡Œ
   - éªŒè¯RPCåœ°å€æ˜¯å¦æ­£ç¡®

2. **ç§é’¥é”™è¯¯**
   - ç¡®ä¿ç§é’¥æ ¼å¼æ­£ç¡®ï¼ˆ64ä½åå…­è¿›åˆ¶ï¼‰
   - æ£€æŸ¥ç§é’¥æ˜¯å¦æœ‰0xå‰ç¼€

3. **Gasä¸è¶³**
   - æ£€æŸ¥è´¦æˆ·ä½™é¢
   - è°ƒæ•´Gasé™åˆ¶

4. **åˆçº¦éƒ¨ç½²å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œçŠ¶æ€
   - éªŒè¯æ„é€ å‡½æ•°å‚æ•°

### è°ƒè¯•æŠ€å·§

- å¯ç”¨DEBUGæ¨¡å¼æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
- æ£€æŸ¥äº¤æ˜“æ”¶æ®ç¡®è®¤éƒ¨ç½²çŠ¶æ€
- ä½¿ç”¨åŒºå—æµè§ˆå™¨éªŒè¯åˆçº¦åœ°å€

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Solidityæ–‡æ¡£](https://docs.soliditylang.org/)
- [Web3.pyæ–‡æ¡£](https://web3py.readthedocs.io/)
- [Besuæ–‡æ¡£](https://besu.hyperledger.org/)

