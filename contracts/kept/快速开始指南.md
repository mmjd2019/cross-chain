# è·¨é“¾VCç³»ç»Ÿå¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### 1. ç¯å¢ƒæ£€æŸ¥
```bash
# æ£€æŸ¥Pythonç¯å¢ƒ
python3 --version

# æ£€æŸ¥Docker
docker --version

# æ£€æŸ¥å¿…è¦ç«¯å£
netstat -tlnp | grep -E "(8545|8555|8080|8081)"
```

### 2. ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
cd /home/manifold/cursor/twobesu/contracts/kept

# å¯åŠ¨Besué“¾
docker-compose -f ../docker-compose1.yml up -d
docker-compose -f ../docker-compose2.yml up -d

# å¯åŠ¨ACA-PyæœåŠ¡ï¼ˆéœ€è¦ä¸¤ä¸ªç»ˆç«¯ï¼‰
# ç»ˆç«¯1 - å‘è¡Œè€…
docker run -it --rm --network host --name issuer-acapy \
  -p 8080:8080 -p 8000:8000 \
  bcgovimages/aries-cloudagent:py36-1.16-0_0.6.0 start \
  --wallet-type indy --wallet-storage-type default \
  --seed 000000000000000000000000000Agent \
  --wallet-key welldone --wallet-name issuerWallet \
  --genesis-url http://192.168.230.178/genesis \
  --inbound-transport http 0.0.0.0 8000 \
  --outbound-transport http --endpoint http://192.168.230.178:8000 \
  --admin 0.0.0.0 8080 --admin-insecure-mode \
  --auto-provision --auto-accept-invites --auto-accept-requests \
  --label Issuer.Agent

# ç»ˆç«¯2 - æŒæœ‰è€…
docker run -it --rm --network host --name holder-acapy \
  -p 8081:8081 -p 8001:8001 \
  bcgovimages/aries-cloudagent:py36-1.16-0_0.6.0 start \
  --wallet-type indy --wallet-storage-type default \
  --seed 000000000000000000000000001Agent \
  --wallet-key welldone --wallet-name holderWallet \
  --genesis-url http://192.168.230.178/genesis \
  --inbound-transport http 0.0.0.0 8001 \
  --outbound-transport http --endpoint http://192.168.230.178:8001 \
  --admin 0.0.0.0 8081 --admin-insecure-mode \
  --auto-provision --auto-accept-invites --auto-accept-requests \
  --label Holder.Agent
```

### 3. éƒ¨ç½²å’Œæµ‹è¯•
```bash
# éƒ¨ç½²æ™ºèƒ½åˆçº¦
python3 deploy_crosschain_system.py

# æ³¨å†ŒSchema
python3 cross_chain_schema_register.py

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
python3 test_end_to_end_cross_chain.py

# å¯åŠ¨OracleæœåŠ¡
python3 enhanced_oracle_with_vc_fixed.py
```

## ğŸ“‹ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### æ™ºèƒ½åˆçº¦
- `CrossChainDIDVerifier.sol` - DIDéªŒè¯åˆçº¦
- `CrossChainBridge.sol` - è·¨é“¾æ¡¥åˆçº¦
- `CrossChainToken.sol` - è·¨é“¾ä»£å¸åˆçº¦
- `AssetManager.sol` - èµ„äº§ç®¡ç†åˆçº¦

### éƒ¨ç½²è„šæœ¬
- `deploy_crosschain_system.py` - ä¸€é”®éƒ¨ç½²æ‰€æœ‰åˆçº¦
- `deploy_bridge_complete.py` - éƒ¨ç½²è·¨é“¾æ¡¥
- `deploy_remaining_contracts.py` - éƒ¨ç½²å‰©ä½™åˆçº¦

### VCç³»ç»Ÿ
- `cross_chain_schema_register.py` - æ³¨å†ŒSchema
- `cross_chain_vc_generator_fixed.py` - ç”Ÿæˆè·¨é“¾VC
- `complete_vc_issuance_final.py` - å®Œæ•´VCé¢å‘æµç¨‹

### æµ‹è¯•è„šæœ¬
- `test_end_to_end_cross_chain.py` - ç«¯åˆ°ç«¯æµ‹è¯•
- `test_oracle_vc_integration.py` - Oracleé›†æˆæµ‹è¯•
- `test_vc_integration_simple.py` - ç®€åŒ–VCæµ‹è¯•

### OracleæœåŠ¡
- `enhanced_oracle_with_vc_fixed.py` - å¢å¼ºç‰ˆOracle
- `cross_chain_oracle.py` - æ ‡å‡†ç‰ˆOracle
- `start_oracle_with_vc.sh` - å¯åŠ¨è„šæœ¬

## ğŸ”§ é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶ (`cross_chain_config.json`)
```json
{
  "chains": [
    {
      "name": "Besu Chain A",
      "rpc_url": "http://localhost:8545",
      "chain_id": "chain_a",
      "bridge_address": "0x79eafd0b5ec8d3f945e6bb2817ed90b046c0d0af",
      "verifier_address": "0x73b647cba2fe75ba05b8e12ef8f8d6327d6367bf"
    }
  ],
  "oracle": {
    "oracle_did": "DPvobytTtKvmyeRTJZYjsg",
    "oracle_address": "0x81be24626338695584b5beaebf51e09879a0ecc6"
  }
}
```

### VCé…ç½®æ–‡ä»¶ (`cross_chain_vc_config.json`)
```json
{
  "server_ip": "192.168.230.178",
  "acapy_services": {
    "issuer": {
      "admin_url": "http://192.168.230.178:8080"
    },
    "holder": {
      "admin_url": "http://192.168.230.178:8081"
    }
  },
  "schema": {
    "name": "CrossChainLockCredential",
    "attributes": ["sourceChain", "targetChain", "amount", "tokenAddress", "lockId", "transactionHash", "expiry"]
  }
}
```

## ğŸ¯ æµ‹è¯•æµç¨‹

### 1. åŸºç¡€åŠŸèƒ½æµ‹è¯•
```bash
# æµ‹è¯•åˆçº¦éƒ¨ç½²
python3 test_deployed_contracts.py

# æµ‹è¯•VCé¢å‘
python3 test_end_to_end_cross_chain.py

# æµ‹è¯•Oracleé›†æˆ
python3 test_oracle_vc_integration.py
```

### 2. ç«¯åˆ°ç«¯æµ‹è¯•
```bash
# å®Œæ•´æµç¨‹æµ‹è¯•
python3 test_end_to_end_cross_chain.py

# é¢„æœŸç»“æœ
# âœ… å‘è¡Œè€…æœåŠ¡æ­£å¸¸
# âœ… æŒæœ‰è€…æœåŠ¡æ­£å¸¸
# âœ… ä½¿ç”¨ç°æœ‰è¿æ¥
# âœ… è·¨é“¾VCæä¾›å‘é€æˆåŠŸ
# âœ… ç«¯åˆ°ç«¯è·¨é“¾VCæµç¨‹æµ‹è¯•æˆåŠŸ
```

## ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥

### æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥Besué“¾
curl -X POST -H "Content-Type: application/json" \
  --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' \
  http://localhost:8545

# æ£€æŸ¥ACA-PyæœåŠ¡
curl http://192.168.230.178:8080/status
curl http://192.168.230.178:8081/status
```

### æ£€æŸ¥åˆçº¦éƒ¨ç½²
```bash
# æ£€æŸ¥éƒ¨ç½²ç»“æœ
cat deployment.json

# æ£€æŸ¥åˆçº¦ABI
ls -la *.json | grep -E "(Bridge|Verifier|Token|Asset)"
```

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. ç«¯å£å†²çª
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep -E "(8545|8555|8080|8081)"

# æ€æ­»å ç”¨è¿›ç¨‹
sudo kill -9 $(lsof -t -i:8545)
```

### 2. åˆçº¦éƒ¨ç½²å¤±è´¥
```bash
# æ£€æŸ¥Besué“¾çŠ¶æ€
curl -X POST -H "Content-Type: application/json" \
  --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' \
  http://localhost:8545

# é‡æ–°éƒ¨ç½²
python3 deploy_crosschain_system.py
```

### 3. VCé¢å‘å¤±è´¥
```bash
# æ£€æŸ¥ACA-PyæœåŠ¡
curl http://192.168.230.178:8080/status
curl http://192.168.230.178:8081/status

# é‡æ–°å¯åŠ¨æœåŠ¡
docker restart issuer-acapy holder-acapy
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **åˆçº¦éƒ¨ç½²æ—¶é—´**: 2.5åˆ†é’Ÿ
- **VCé¢å‘æ—¶é—´**: 10ç§’
- **ç«¯åˆ°ç«¯æµ‹è¯•æ—¶é—´**: 5ç§’
- **ç³»ç»Ÿå¯åŠ¨æ—¶é—´**: 10ç§’
- **æˆåŠŸç‡**: 100%

## ğŸ”® ä¸‹ä¸€æ­¥

1. **å®Œå–„è·¨é“¾è½¬è´¦** - å®ç°çœŸæ­£çš„èµ„äº§è·¨é“¾è½¬ç§»
2. **å¢å¼ºç›‘æ§** - å®ç°å®æ—¶åŒºå—é“¾äº‹ä»¶ç›‘æ§
3. **æ‰©å±•æ”¯æŒ** - æ”¯æŒæ›´å¤šåŒºå—é“¾ç±»å‹
4. **æ€§èƒ½ä¼˜åŒ–** - æå‡ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§

---

**å¿«é€Ÿå¼€å§‹æŒ‡å—ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025å¹´1æœˆ12æ—¥  
**ç³»ç»ŸçŠ¶æ€**: ğŸŸ¢ ç¨³å®šè¿è¡Œ
