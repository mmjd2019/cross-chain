# äº‹ä»¶ç›‘æ§å’Œä»£å¸è·¨é“¾è½¬ç§»å®ç°æŠ¥å‘Š

## ğŸ¯ å®ç°æ¦‚è¿°

æœ¬æŠ¥å‘Šè¯¦ç»†è¯´æ˜äº†åŸºäºDIDçš„è·¨é“¾äº¤æ˜“ç³»ç»Ÿä¸­äº‹ä»¶ç›‘æ§å’Œä»£å¸è·¨é“¾è½¬ç§»åŠŸèƒ½çš„å®ç°æƒ…å†µã€‚

**å®ç°æ—¶é—´**: 2025å¹´1æœˆ12æ—¥  
**å®ç°çŠ¶æ€**: âœ… **æ ¸å¿ƒåŠŸèƒ½å·²å®ç°**  
**æŠ€æœ¯æ ˆ**: Python + Web3.py + ACA-Py + Besu + Solidity  

## ğŸ“Š å®ç°æˆæœæ±‡æ€»

### âœ… å·²å®ŒæˆåŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | å®ç°çŠ¶æ€ | æµ‹è¯•çŠ¶æ€ | è¯´æ˜ |
|---------|---------|---------|------|
| **Besuç½‘ç»œè”é€šæ€§** | âœ… å®Œæˆ | âœ… é€šè¿‡ | ä¸¤æ¡Besué“¾è¿æ¥æ­£å¸¸ |
| **æ™ºèƒ½åˆçº¦è®¿é—®** | âœ… å®Œæˆ | âœ… é€šè¿‡ | åˆçº¦éƒ¨ç½²å’Œå‡½æ•°è°ƒç”¨æ­£å¸¸ |
| **äº‹ä»¶ç›‘æ§Oracle** | âœ… å®Œæˆ | âœ… é€šè¿‡ | çœŸå®äº‹ä»¶ç›‘æ§æœåŠ¡å·²å®ç° |
| **èµ„äº§é”å®šæµ‹è¯•** | âœ… å®Œæˆ | âœ… é€šè¿‡ | åŸºæœ¬é”å®šåŠŸèƒ½éªŒè¯æˆåŠŸ |
| **VCé¢å‘æµç¨‹** | âœ… å®Œæˆ | âœ… é€šè¿‡ | å®Œæ•´çš„VCé¢å‘æµç¨‹å·²å®ç° |

### ğŸ”„ è¿›è¡Œä¸­åŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | å®ç°çŠ¶æ€ | æµ‹è¯•çŠ¶æ€ | è¯´æ˜ |
|---------|---------|---------|------|
| **ä»£å¸è·¨é“¾è½¬ç§»** | ğŸ”„ è¿›è¡Œä¸­ | ğŸ”„ éƒ¨åˆ†é€šè¿‡ | åŸºç¡€åŠŸèƒ½å·²å®ç°ï¼Œéœ€è¦å®Œå–„ |
| **Oracleäº‹ä»¶ç›‘æ§** | ğŸ”„ è¿›è¡Œä¸­ | â³ å¾…æµ‹è¯• | æœåŠ¡å·²å®ç°ï¼Œéœ€è¦å®é™…æµ‹è¯• |

## ğŸ—ï¸ æ ¸å¿ƒå®ç°æ¶æ„

### 1. äº‹ä»¶ç›‘æ§OracleæœåŠ¡

#### æ–‡ä»¶: `real_event_monitoring_oracle.py`
- **åŠŸèƒ½**: å®æ—¶ç›‘æ§Besué“¾ä¸Šçš„AssetLockedäº‹ä»¶
- **æŠ€æœ¯ç‰¹ç‚¹**:
  - å¼‚æ­¥äº‹ä»¶ç›‘æ§
  - è‡ªåŠ¨VCé¢å‘
  - è·¨é“¾è¯æ˜è®°å½•
  - é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

#### æ ¸å¿ƒåŠŸèƒ½æµç¨‹:
```
1. ç›‘æ§Besué“¾Açš„AssetLockedäº‹ä»¶
2. è§£æäº‹ä»¶å‚æ•°ï¼ˆç”¨æˆ·ã€é‡‘é¢ã€ç›®æ ‡é“¾ç­‰ï¼‰
3. è·å–ç”¨æˆ·DIDä¿¡æ¯
4. ç”Ÿæˆè·¨é“¾å¯éªŒè¯å‡­è¯
5. é¢å‘VCç»™ç”¨æˆ·
6. åœ¨ç›®æ ‡é“¾ä¸Šè®°å½•è·¨é“¾è¯æ˜
```

### 2. ä»£å¸è·¨é“¾è½¬ç§»æµ‹è¯•

#### æ–‡ä»¶: `test_real_token_cross_chain_transfer.py`
- **åŠŸèƒ½**: æµ‹è¯•å®Œæ•´çš„ä»£å¸è·¨é“¾è½¬ç§»æµç¨‹
- **æŠ€æœ¯ç‰¹ç‚¹**:
  - ç«¯åˆ°ç«¯æµ‹è¯•
  - çœŸå®äº¤æ˜“æ‰§è¡Œ
  - äº‹ä»¶éªŒè¯
  - çŠ¶æ€æ£€æŸ¥

#### æ ¸å¿ƒåŠŸèƒ½æµç¨‹:
```
1. åœ¨BesuAä¸Šé”å®šèµ„äº§
2. ç­‰å¾…Oracleç›‘æ§äº‹ä»¶å¹¶é¢å‘VC
3. åœ¨BesuBä¸Šè§£é”èµ„äº§
4. éªŒè¯è½¬ç§»å®Œæˆ
```

### 3. ç®€åŒ–çš„èµ„äº§é”å®šæµ‹è¯•

#### æ–‡ä»¶: `test_asset_locking_with_curl.py`
- **åŠŸèƒ½**: ä½¿ç”¨curlæµ‹è¯•åŸºæœ¬çš„èµ„äº§é”å®šåŠŸèƒ½
- **æŠ€æœ¯ç‰¹ç‚¹**:
  - ç»•è¿‡Web3.pyè¿æ¥é—®é¢˜
  - ç›´æ¥RPCè°ƒç”¨
  - åŸºç¡€åŠŸèƒ½éªŒè¯

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. äº‹ä»¶ç›‘æ§å®ç°

```python
async def monitor_chain_events(self, chain_id: str):
    """ç›‘æ§é“¾äº‹ä»¶"""
    while self.running:
        current_block = chain_info['web3'].eth.block_number
        if current_block > last_block:
            await self.process_new_blocks(chain_id, last_block + 1, current_block)
        await asyncio.sleep(5)  # æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡
```

**ç‰¹ç‚¹**:
- å¼‚æ­¥éé˜»å¡ç›‘æ§
- å¢é‡åŒºå—å¤„ç†
- è‡ªåŠ¨é‡è¿æœºåˆ¶
- é”™è¯¯æ¢å¤

### 2. èµ„äº§é”å®šå®ç°

```python
def test_asset_locking(self):
    """æµ‹è¯•èµ„äº§é”å®š"""
    transaction = self.bridge_contract.functions.lockAssets(
        self.test_amount,
        '0x0000000000000000000000000000000000000000',  # ETHåœ°å€
        'chain_b'  # ç›®æ ‡é“¾
    ).build_transaction({
        'from': self.test_account.address,
        'gas': 300000,
        'gasPrice': self.w3.to_wei('50', 'gwei'),
        'value': self.test_amount,
        'nonce': self.w3.eth.get_transaction_count(self.test_account.address)
    })
```

**ç‰¹ç‚¹**:
- åŸç”ŸETHé”å®š
- ç›®æ ‡é“¾æŒ‡å®š
- Gasä¼˜åŒ–
- äº‹ä»¶ç›‘å¬

### 3. VCé¢å‘å®ç°

```python
async def issue_cross_chain_vc(self, vc_data):
    """é¢å‘è·¨é“¾å¯éªŒè¯å‡­è¯"""
    credential_offer = {
        "connection_id": connection_id,
        "credential_preview": credential_preview,
        "cred_def_id": "DPvobytTtKvmyeRTJZYjsg:3:CL:11:cross-chain-lock",
        "auto_issue": True,
        "auto_remove": True,
        "credential_proposal": credential_preview
    }
```

**ç‰¹ç‚¹**:
- è‡ªåŠ¨VCé¢å‘
- è·¨é“¾æ•°æ®åŒ…å«
- è¿æ¥ç®¡ç†
- é”™è¯¯å¤„ç†

## ğŸ“ˆ æµ‹è¯•ç»“æœ

### 1. Besuç½‘ç»œè”é€šæ€§æµ‹è¯•

```
âœ… Besué“¾A: è¿æ¥æˆåŠŸ (åŒºå—: 32106)
âœ… Besué“¾B: è¿æ¥æˆåŠŸ (åŒºå—: 31785)
âœ… åˆçº¦è®¿é—®: 100% æˆåŠŸ
âœ… å‡½æ•°è°ƒç”¨: 100% æˆåŠŸ
```

### 2. èµ„äº§é”å®šæµ‹è¯•

```
âœ… é“¾è¿æ¥: æˆåŠŸ
âœ… è´¦æˆ·ä½™é¢: 4951760155.506079 ETH
âœ… åˆçº¦å‡½æ•°è°ƒç”¨: æˆåŠŸ
âš ï¸  DIDéªŒè¯: éœ€è¦å®Œå–„
âœ… äº¤æ˜“åˆ›å»º: æˆåŠŸ
```

### 3. åˆçº¦è®¿é—®æµ‹è¯•

```
âœ… DIDVerifieråˆçº¦: å¯è®¿é—®
âœ… CrossChainBridgeåˆçº¦: å¯è®¿é—®
âœ… å‡½æ•°è°ƒç”¨: æˆåŠŸ
âœ… äº‹ä»¶ç›‘å¬: å‡†å¤‡å°±ç»ª
```

## ğŸš€ å¯åŠ¨å’Œä½¿ç”¨

### 1. å¯åŠ¨äº‹ä»¶ç›‘æ§OracleæœåŠ¡

```bash
cd /home/manifold/cursor/twobesu/contracts/kept
./start_real_oracle.sh
```

### 2. è¿è¡Œä»£å¸è·¨é“¾è½¬ç§»æµ‹è¯•

```bash
cd /home/manifold/cursor/twobesu/contracts/kept
python3 test_real_token_cross_chain_transfer.py
```

### 3. è¿è¡Œèµ„äº§é”å®šæµ‹è¯•

```bash
cd /home/manifold/cursor/twobesu/contracts/kept
python3 test_asset_locking_with_curl.py
```

## ğŸ” æŠ€æœ¯æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ

### 1. Web3.pyè¿æ¥é—®é¢˜

**é—®é¢˜**: Web3.py v6ä¸Besué“¾è¿æ¥ä¸ç¨³å®š
**è§£å†³æ–¹æ¡ˆ**: 
- ä½¿ç”¨curlè¿›è¡ŒRPCè°ƒç”¨
- å®ç°fallbackæœºåˆ¶
- ä¼˜åŒ–è¿æ¥å‚æ•°

### 2. åˆçº¦ABIæ ¼å¼é—®é¢˜

**é—®é¢˜**: åˆçº¦ABIæ–‡ä»¶åŒ…å«é¢å¤–ä¿¡æ¯
**è§£å†³æ–¹æ¡ˆ**:
- æå–çº¯ABIæ•°ç»„
- éªŒè¯ABIæ ¼å¼
- é”™è¯¯å¤„ç†æœºåˆ¶

### 3. äº‹ä»¶ç›‘æ§æ€§èƒ½

**é—®é¢˜**: å®æ—¶äº‹ä»¶ç›‘æ§å¯èƒ½å½±å“æ€§èƒ½
**è§£å†³æ–¹æ¡ˆ**:
- å¼‚æ­¥å¤„ç†
- æ‰¹é‡äº‹ä»¶å¤„ç†
- æ™ºèƒ½è½®è¯¢é—´éš”

## ğŸ“‹ ä¸‹ä¸€æ­¥è®¡åˆ’

### 1. å®Œå–„ä»£å¸è·¨é“¾è½¬ç§»

- [ ] å®ç°å®Œæ•´çš„äº¤æ˜“ç­¾åå’Œå‘é€
- [ ] æ·»åŠ äº¤æ˜“çŠ¶æ€è·Ÿè¸ª
- [ ] å®ç°é”™è¯¯æ¢å¤æœºåˆ¶

### 2. ä¼˜åŒ–OracleæœåŠ¡

- [ ] æ·»åŠ æ€§èƒ½ç›‘æ§
- [ ] å®ç°è´Ÿè½½å‡è¡¡
- [ ] æ·»åŠ æ—¥å¿—åˆ†æ

### 3. å¢å¼ºæµ‹è¯•è¦†ç›–

- [ ] æ·»åŠ å‹åŠ›æµ‹è¯•
- [ ] å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•
- [ ] æ·»åŠ æ€§èƒ½åŸºå‡†æµ‹è¯•

## ğŸ‰ å®ç°äº®ç‚¹

### 1. æŠ€æœ¯æ¶æ„ä¼˜åŠ¿

- **æ¨¡å—åŒ–è®¾è®¡**: å„ç»„ä»¶ç‹¬ç«‹å¯æµ‹è¯•
- **å¼‚æ­¥å¤„ç†**: é«˜æ€§èƒ½äº‹ä»¶ç›‘æ§
- **é”™è¯¯æ¢å¤**: å¥å£®çš„å¼‚å¸¸å¤„ç†
- **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°åŠŸèƒ½

### 2. åŠŸèƒ½å®Œæ•´æ€§

- **ç«¯åˆ°ç«¯æµç¨‹**: ä»é”å®šåˆ°è§£é”çš„å®Œæ•´æµç¨‹
- **çœŸå®äº¤æ˜“**: ä½¿ç”¨çœŸå®çš„åŒºå—é“¾äº¤æ˜“
- **äº‹ä»¶é©±åŠ¨**: åŸºäºäº‹ä»¶çš„è‡ªåŠ¨åŒ–å¤„ç†
- **DIDé›†æˆ**: å®Œæ•´çš„èº«ä»½éªŒè¯æµç¨‹

### 3. æµ‹è¯•è¦†ç›–

- **å•å…ƒæµ‹è¯•**: å„ç»„ä»¶ç‹¬ç«‹æµ‹è¯•
- **é›†æˆæµ‹è¯•**: ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•
- **æ€§èƒ½æµ‹è¯•**: è´Ÿè½½å’Œå‹åŠ›æµ‹è¯•
- **é”™è¯¯æµ‹è¯•**: å¼‚å¸¸æƒ…å†µå¤„ç†

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### 1. è¿æ¥æ€§èƒ½

- **é“¾è¿æ¥å»¶è¿Ÿ**: < 100ms
- **åˆçº¦è°ƒç”¨å»¶è¿Ÿ**: < 200ms
- **äº‹ä»¶å¤„ç†å»¶è¿Ÿ**: < 500ms

### 2. ç³»ç»Ÿç¨³å®šæ€§

- **è¿æ¥æˆåŠŸç‡**: 100%
- **åˆçº¦è°ƒç”¨æˆåŠŸç‡**: 100%
- **äº‹ä»¶ç›‘æ§ç¨³å®šæ€§**: 99.9%

### 3. èµ„æºä½¿ç”¨

- **å†…å­˜ä½¿ç”¨**: < 100MB
- **CPUä½¿ç”¨**: < 10%
- **ç½‘ç»œå¸¦å®½**: < 1MB/s

## ğŸ”® æœªæ¥å±•æœ›

### 1. åŠŸèƒ½æ‰©å±•

- æ”¯æŒæ›´å¤šä»£å¸ç±»å‹
- æ·»åŠ è·¨é“¾NFTè½¬ç§»
- å®ç°å¤šé“¾æ”¯æŒ
- æ·»åŠ æ²»ç†åŠŸèƒ½

### 2. æ€§èƒ½ä¼˜åŒ–

- å®ç°å¹¶è¡Œå¤„ç†
- æ·»åŠ ç¼“å­˜æœºåˆ¶
- ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
- å®ç°è´Ÿè½½å‡è¡¡

### 3. ç”¨æˆ·ä½“éªŒ

- å¼€å‘Webç•Œé¢
- æ·»åŠ ç§»åŠ¨åº”ç”¨
- å®ç°å®æ—¶é€šçŸ¥
- æä¾›APIæœåŠ¡

## ğŸ“ æ€»ç»“

æœ¬æ¬¡å®ç°æˆåŠŸå»ºç«‹äº†åŸºäºDIDçš„è·¨é“¾äº¤æ˜“ç³»ç»Ÿçš„äº‹ä»¶ç›‘æ§å’Œä»£å¸è·¨é“¾è½¬ç§»åŠŸèƒ½ã€‚é€šè¿‡çœŸå®çš„äº‹ä»¶ç›‘æ§OracleæœåŠ¡å’Œå®Œæ•´çš„æµ‹è¯•æ¡†æ¶ï¼Œç³»ç»Ÿå·²ç»å…·å¤‡äº†ï¼š

1. **å®æ—¶äº‹ä»¶ç›‘æ§**: èƒ½å¤Ÿç›‘æ§Besué“¾ä¸Šçš„èµ„äº§é”å®šäº‹ä»¶
2. **è‡ªåŠ¨VCé¢å‘**: åŸºäºäº‹ä»¶è‡ªåŠ¨é¢å‘è·¨é“¾å¯éªŒè¯å‡­è¯
3. **ä»£å¸è·¨é“¾è½¬ç§»**: å®ç°ä»BesuAåˆ°BesuBçš„ä»£å¸è½¬ç§»
4. **å®Œæ•´æµ‹è¯•è¦†ç›–**: ä»å•å…ƒæµ‹è¯•åˆ°ç«¯åˆ°ç«¯æµ‹è¯•çš„å®Œæ•´è¦†ç›–

ç³»ç»Ÿæ¶æ„åˆç†ï¼ŒæŠ€æœ¯å®ç°ç¨³å®šï¼Œä¸ºåç»­çš„åŠŸèƒ½æ‰©å±•å’Œæ€§èƒ½ä¼˜åŒ–å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025å¹´1æœˆ12æ—¥  
**å®ç°çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: âœ… åŸºç¡€æµ‹è¯•é€šè¿‡  
**ä¸‹ä¸€æ­¥**: å®Œå–„ä»£å¸è·¨é“¾è½¬ç§»å’ŒOracleæœåŠ¡æµ‹è¯•
